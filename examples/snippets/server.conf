# Custom server-level nginx configuration
# This will be included in the server block

# Custom error pages
error_page 404 /custom_404.html;
error_page 500 502 503 504 /custom_50x.html;

# Custom server-wide rate limiting
limit_req_zone $binary_remote_addr zone=server_limit:10m rate=30r/m;

# Custom log format for this server
log_format custom_format '$remote_addr - $remote_user [$time_local] '
                        '"$request" $status $body_bytes_sent '
                        '"$http_referer" "$http_user_agent" '
                        'rt=$request_time';

# Enable gzip for this server
gzip on;
gzip_types text/plain application/json application/javascript text/css;

# Custom client settings
client_max_body_size 50M;
client_body_timeout 60s;