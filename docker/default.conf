# Default server configuration
# This will be used when no specific host matches

server {
    listen 80 default_server;
    listen [::]:80 default_server;
    server_name _;

    # Health check endpoint
    location /health {
        access_log off;
        return 200 "healthy\n";
        add_header Content-Type text/plain;
    }

    # Default response for undefined hosts
    location / {
        return 404 '<!DOCTYPE html>
<html>
<head>
    <title>404 Not Found</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; }
        .container { max-width: 600px; margin: 0 auto; text-align: center; }
        .logo { font-size: 24px; font-weight: bold; color: #333; margin-bottom: 20px; }
        .message { font-size: 18px; color: #666; margin-bottom: 30px; }
        .details { font-size: 14px; color: #999; }
        .code { background: #f5f5f5; padding: 4px 8px; border-radius: 4px; font-family: monospace; }
    </style>
</head>
<body>
    <div class="container">
        <div class="logo">üê≥ Local Nginx Ingress</div>
        <div class="message">Service Not Found</div>
        <div class="details">
            <p>The requested service is not configured or not running.</p>
            <p>Make sure your container has the required labels:</p>
            <p><span class="code">nginx.ingress.enable=true</span></p>
            <p><span class="code">nginx.ingress.host=your-domain.local</span></p>
        </div>
    </div>
</body>
</html>';
        add_header Content-Type text/html;
    }
}

# SSL default server (will be enabled when SSL is configured)
server {
    listen 443 ssl default_server;
    listen [::]:443 ssl default_server;
    server_name _;

    # Self-signed certificate for default SSL (should be replaced with real certs)
    ssl_certificate /etc/nginx/ssl/default.crt;
    ssl_certificate_key /etc/nginx/ssl/default.key;

    # Health check endpoint
    location /health {
        access_log off;
        return 200 "healthy\n";
        add_header Content-Type text/plain;
    }

    # Default SSL response
    location / {
        return 404 '<!DOCTYPE html>
<html>
<head>
    <title>404 Not Found - SSL</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; }
        .container { max-width: 600px; margin: 0 auto; text-align: center; }
        .logo { font-size: 24px; font-weight: bold; color: #333; margin-bottom: 20px; }
        .message { font-size: 18px; color: #666; margin-bottom: 30px; }
        .details { font-size: 14px; color: #999; }
        .code { background: #f5f5f5; padding: 4px 8px; border-radius: 4px; font-family: monospace; }
    </style>
</head>
<body>
    <div class="container">
        <div class="logo">üîí Local Nginx Ingress (SSL)</div>
        <div class="message">Secure Service Not Found</div>
        <div class="details">
            <p>The requested SSL service is not configured or not running.</p>
            <p>For SSL services, add these labels:</p>
            <p><span class="code">nginx.ingress.tls=true</span></p>
            <p><span class="code">nginx.ingress.tls.certname=your-cert</span></p>
        </div>
    </div>
</body>
</html>';
        add_header Content-Type text/html;
    }
}